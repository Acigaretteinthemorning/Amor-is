$(function(){var l=$("#nickname"),i=$("#email"),n=$("#phone"),u=!1,c=!1,o=!1;l.blur(function(){var t=$(this).val();u=!/^\s*$/g.test(t)||($(this).attr("placeholder","不能为空"),!1)}),i.blur(function(){var t=$(this).val();c=!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t)||($(this).attr("placeholder","邮箱不正确请重新输入"),alert("邮箱不正确请重新输入"),!1)}),n.blur(function(){var t=$(this).val();o=!!/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/.test(t)||($(this).attr("placeholder","请输入正确的手机号码"),alert("请输入正确的手机号码"),!1)}),$("#update").click(function(){if(!(u&&c&&o))return l.trigger("blur"),i.trigger("blur"),n.trigger("blur"),!1;var t=$("#nickname").val(),a=$("#email").val(),e=$("#phone").val(),r=localStorage.getItem("uid");if(!(t&&a&&e))return!1;$.ajax({url:"http://127.0.0.1:8848/updateuser.php",type:"POST",data:{nickname:t,email:a,phone:e,id:r},success:function(t){"ok"==t?(alert("更新成功"),location.href="#home"):alert("更新失败，稍等在试一下...")}})})});